


1. Provider is about to offer data in the form of csv file.  
    
	- Csv file can be encrypted via SPIP, the whole content or partially (some predefined columns) 
	
	- Per product, only one encrypted and one non-encrypted	file can be uploaded and stored in database.

    - To encryption process is executed 'in-flight' during the upload (so actually content of csv is encrypted and saved in new created file)

    - In database table, the link between file and product (e.g. digital product passport) is stored
	
	- The provider can download the uploaded file (so far not option for 'in-flight' encryption/decryption ) 

    - The partial encryption is executed by following endpoint:
	
	  https://somehost/secure/data
      POST
      ..Some header
      body example
   
		{
		"sync": true,
		"output_type": "content",
		"input_type": "text/csv",
		"input_value": {
		  "content": "name,phone,address\nMarko,2136546,Serbia West Central\n"
		},
		"services": [
		  {
			"service": "abe",
			"type": "CP-ABE",
			"type_input": "text/csv",
			"operation": "encrypt",
			"csv_descriptor": {
			  "delimiter": ",",
			  "encrypt_options": {
				"column_options": [
				  {
					"column_name": "name",
					"input": "DataClassification:Confidential",
					"type": "CP-ABE"
				  },
				  {
					"column_name": "address",
					"input": "DataClassification:Confidential",
					"type": "CP-ABE"
				  }
				]
			  }
			}
		  }
		]
		} 	  
		
		Note:
		attribute operation defines is it encrypt or decrypt
		attribute column_options defines which columns are about to be encrypted.
		
		
2. Consumer is about to read the data.

   To consume data decrypted consumer following endpoint need to be called:

	 https://somehost/secure/data
      POST
      ..Some header
      {
    "sync": true,
    "output_type": "content",
    "input_type": "text/csv",
    "input_value": {
      "content": "name,phone,address\ncAAABk6ETqm/J7sMJ/Mlhl/dTf7bRCzgJxrIBe6ESQ19kZmM0MzU5ZjYzMzY5NGUyoSSyoSECC8kXpg+JfkMaoZBRVR0QGNrIKHjOcSy9M3uR8dpvnTKhBkNwcmltZaEksqEhAwaxWLAakVmSPoro27Rs4PTQzu1i4O3QXopTo5AzSTHCoRJEX2RmYzQzNTlmNjMzNjk0ZTKhg7OhgAMjtQkEooNPp9Q3u76ho37/CZB+30egiJcdqvomMviKIZvm1q2DUFtijAPaDFcmTh++uthDTiDL8l991LkJQoUAU/dhIIoMPeEtym9hzENKyZkMqs5vD5IE852YB2Y3dxese86dd01/N2B8xZOwr7PPpaMTqtZG5crRBv7yOJBRoQNfRUShRR0AAABADE65kbOdSJjjCe8sZiEbxA3p7D4iZ3GSaW6pmGz0NqEPeEY7x7qD2JP9Cp7Oa1NvG67PqYlMblZfekAt/6V9l6EGcG9saWN5oSQdAAAAH0RhdGFDbGFzc2lmaWNhdGlvbjpDb25maWRlbnRpYWwAAABeoROqAEbuwwn8yWGX91N/ttELOAnGoUehAkNUoQodAAAABSCyDv/JoQJJVqEVHQAAABAPrEtz1xt7ZzmpuaOKQ10CoQNUYWehFR0AAAAQDdGnFczZ7/kJ6KZYyNLDmA==,2136546,cAAABk6ETqm/JS+4x6e3p9+5UYIZ1kLwiNrIBe6ESQ19kZmM0MzU5ZjYzMzY5NGUyoSSyoSEDDzuznTjhuRvnZiXd1ISLQuNMxicsXNLnDai2JCMB2MShBkNwcmltZaEksqEhAwWWIy1tQ8A/zBF8YuIiGSPIOtO7OV0lkhBnixnSL8uzoRJEX2RmYzQzNTlmNjMzNjk0ZTKhg7OhgBwOPkyzDu7hhXiVJBv0648iCdQ/Ve7uaJw8yexVx2ZCEocx37cghESsHfR1tY01axVozlCmydgHCn1Kes9gOnoaYv4KZ1Zz9t1bYZsoMJyfSpifcSV2kF6XbrO1fezyhQMH62MhtgnSa6q0nIlYdhsF4pJ0pEmeb7nJJfcYBsCCoQNfRUShRR0AAABAXDcbhRUdXjZIRM4mnEN0pFS1pvJNHytpRqYj/UK8T2/OrdtvxMEshiR64tL2Gh4XTHr9ByzdO+pjQASTk9877KEGcG9saWN5oSQdAAAAH0RhdGFDbGFzc2lmaWNhdGlvbjpDb25maWRlbnRpYWwAAABsoROqAEZL7jHp7en37lRghnWQvCI2oVWhAkNUoRgdAAAAE6IjGRB3LorKhPWfc2tQ2Ni4+O2hAklWoRUdAAAAECcR3VFPQ9KIIZgUFOrS016hA1RhZ6EVHQAAABC+fRqZzfaMFwljpKrVlwVg\n"
    },
    "services": [
      {
        "service": "abe",
        "type": "CP-ABE",
        "type_input": "text/csv",
        "operation": "decrypt",
        "csv_descriptor": {
          "delimiter": ",",
          "encrypt_options": {
            "column_options": [
              {
                "column_name": "name",
                "input": "DataClassification:Confidential",
                "type": "CP-ABE"
              },
              {
                "column_name": "address",
                "input": "DataClassification:Confidential",
                "type": "CP-ABE"
              }
            ]
          }
        }
      }
    ]
  }

  Note:
   - The same endpoint as encryption, but different values in some attributes 
   - attribute operation has a value decrypt
   - attribute column_options have to be same as endpoint of encryption
   - attribute input_type.content is actually response of encryption endpoint


   